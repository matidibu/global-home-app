<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Home Assist | El mundo es tu lugar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .loading-dots:after { content: ' .'; animation: dots 1s steps(5, end) infinite; }
        @keyframes dots { 0%, 20% { content: ' .'; } 40% { content: ' ..'; } 60% { content: ' ...'; } 80%, 100% { content: ''; } }
    </style>
</head>
<body class="bg-slate-50 font-sans text-slate-900">
    <header class="bg-slate-900 text-white py-12 px-6 text-center shadow-lg">
        <h1 class="text-4xl font-bold tracking-tight">GLOBAL HOME ASSIST</h1>
        <p class="text-blue-300 mt-2 text-lg italic italic">El mundo es tu lugar</p>
    </header>

    <main class="max-w-2xl mx-auto -mt-8 p-4">
        <div class="bg-white rounded-3xl shadow-2xl p-8 border border-slate-100">
            <div class="space-y-4">
                <input type="text" id="nacionalidad" placeholder="Tu nacionalidad (ej: Argentino)" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500">
                <input type="text" id="destino" placeholder="¬øA qu√© ciudad viajas? (ej: Madrid)" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500">
                <button onclick="generarAsistencia()" id="btn-enviar" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-2xl transition-all shadow-lg active:scale-95">
                    SENTIRME EN CASA
                </button>
            </div>

            <div id="resultado" class="hidden mt-8 space-y-6 animate-fade-in">
                <div class="p-6 bg-blue-50 rounded-2xl border-l-4 border-blue-500">
                    <h3 class="font-bold text-blue-800 mb-2">Tu Asistente dice:</h3>
                    <p id="bienvenida" class="text-slate-700 italic"></p>
                </div>
                
                <div class="grid gap-4">
                    <div class="p-4 bg-red-50 rounded-xl border border-red-100">
                        <h4 class="font-bold text-red-700">üÜò En caso de p√©rdida de documentos:</h4>
                        <p id="pasos" class="text-sm mt-1 text-slate-600"></p>
                    </div>
                    <div class="p-4 bg-green-50 rounded-xl border border-green-100">
                        <h4 class="font-bold text-green-700">üè† Sentite como en casa:</h4>
                        <p id="consejo" class="text-sm mt-1 text-slate-600"></p>
                    </div>
                </div>
            </div>

            <div id="loader" class="hidden mt-8 text-center text-blue-600 font-medium loading-dots">
                Preparando tu llegada
            </div>
        </div>
    </main>

    <script>
        async function generarAsistencia() {
            const nac = document.getElementById('nacionalidad').value;
            const dest = document.getElementById('destino').value;
            const resDiv = document.getElementById('resultado');
            const loader = document.getElementById('loader');
            
            if(!nac || !dest) return alert("Por favor, completa los campos para asistirte.");

            resDiv.classList.add('hidden');
            loader.classList.remove('hidden');

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({nacionalidad: nac, destino: dest})
                });
                const data = await response.json();

                document.getElementById('bienvenida').innerText = data.bienvenida;
                document.getElementById('pasos').innerText = data.pasos_pasaporte;
                document.getElementById('consejo').innerText = data.consejo_hogar;

                loader.classList.add('hidden');
                resDiv.classList.remove('hidden');
            } catch (error) {
                alert("Hubo un problema. Intentemos de nuevo.");
                loader.classList.add('hidden');
            }
        }
    </script>
</body>
</html>